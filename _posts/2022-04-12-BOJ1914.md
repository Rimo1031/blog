---
title: "BOJ 1914. 하노이 탑"
excerpt: "하노이 탑의 이동 순서를 출력하는 프로그램을 작성하라."
categories: 
  - Problem Solving
tags:
  - Recursion
  - Arbitrary Precision
  - Big Integer
toc: true
toc_sticky: true
# last_modified_at : 2022-04-12T00:30:00
---

## [문제](https://www.acmicpc.net/problem/1914)
세 개의 장대가 있고 첫 번째 장대에는 반경이 서로 다른 N개의 원판이 쌓여 있다. 각 원판은 반경이 큰 순서대로 쌓여있다. 이제 수도승들이 다음 규칙에 따라 모든 원판을 첫 번째 장대에서 세 번째 장대로 옮기려 한다.

1. 한 번에 한 개의 원판만을 다른 탑으로 옮길 수 있다.
2. 쌓아 놓은 원판은 항상 위의 것이 아래의 것보다 작아야 한다.
이 작업을 수행하는데 필요한 이동 순서를 출력하는 프로그램을 작성하라. 단, 이동 횟수는 최소가 되어야 한다.

아래 그림은 원판이 5개인 경우의 예시이다.

![hanoi](https://onlinejudgeimages.s3-ap-northeast-1.amazonaws.com/problem/11729/hanoi.png)

## 문제 정보 

| [solved.ac](https://solved.ac) Tier | Time Limit | Memory Limit |
|:-----------------------------------:|:----------:|:------------:|
| Silver 2                            | 6 s        | 128 MB       |

## 입력
첫째 줄에 첫 번째 장대에 쌓인 원판의 개수 N (1 ≤ N ≤ 100)이 주어진다.

## 출력
첫째 줄에 옮긴 횟수 K를 출력한다.


N이 20 이하인 입력에 대해서는 두 번째 줄부터 수행 과정을 출력한다. 두 번째 줄부터 K개의 줄에 걸쳐 두 정수 A, B를 빈칸을 사이에 두고 출력하는데, 이는 A번째 탑의 가장 위에 있는 원판을 B번째 탑의 가장 위로 옮긴다는 뜻이다. N이 20보다 큰 경우에는 과정은 출력할 필요가 없다.

## 코드
- 제출 시기 : 2022.03.15
- 사용 언어 : Python

```python
def process(floor, st, ed):
    if (floor == 1):
        print('%d %d' % (st, ed))
    else:
        if (st + ed == 3):
            vac = 3
        elif (st + ed == 4):
            vac = 2
        elif (st + ed == 5):
            vac = 1
        process(floor-1, st, vac)
        process(1, st, ed)
        process(floor-1, vac, ed)

n = int(input())
k = 2**n - 1;
print(k)
if (n <= 20):
    process(n, 1, 3)
```

N이 최대 100이고, 따라서 K의 최댓값이 $2^{100}-1$이 되므로 ``long long`` 범위를 초과한다. 따라서 정수를 범위에 관계없이 다룰 수 있는 Python을 사용하였다.



## 해설
> 하노이 탑을 옮기는 과정을 세 부분으로 나누어 본다.


높이가 N인 하노이 탑을 한 기둥에서 다른 기둥으로 옮기는 데 필요한 시행의 총 횟수는 $2^N-1$로 잘 알려져 있다. 그러나, 이 문제는 N<20일 경우 개별 시행 과정을 출력해야 한다는 차이점이 있다. 따라서 시행 횟수를 출력하는 변수 k에는 $2^N-1$을 할당해 바로 출력하고, N<20일 때 개별 시행 과정을 출력하는 조건문을 삽입하였다. ``k=2**n-1`` 구문이 없더라도 ``process()`` 함수가 호출될 때마다 증가하는 전역 변수 ``cnt`` 등이 있다면 시행 횟수를 출력할 수 있을 것이다.


하노이 탑을 한 기둥에서 다른 기둥으로 옮기는 과정은 크게 세 부분으로 나눌 수 있다. 후술할 ``process()`` 함수에서의 변수명과 일치하도록, 세 개의 기둥을 다음과 같이 정의하겠다.

- 출발 기둥 : st
- 도착 기둥 : ed
- 사용하지 않는 기둥 : vac

목표는 N개의 원판을 기둥 st에서 기둥 ed로 모두 옮기는 것이다. 맨 위층의 원판을 1, ... 맨 아래층의 원판을 N이라고 하자. 원판을 모두 옮기려면 원판 N이 기둥 st에서 기둥 ed로 옮겨져야 하고, 원판 N 위에는 어떤 원판도 올 수 없으므로 기둥 st에는 원판 N 외에 아무 원판도 없으면서 기둥 ed는 완전히 비어 있어야 한다. 그렇다면 자연스럽게 원판 1부터 원판 N-1까지의 탑은 모두 vac 기둥으로 옮겨져 있어야 한다. 그리고 나서 원판 1부터 원판 N-1을 기둥 vac에서 기둥 ed로 옮겨주면 모든 원판이 기둥 ed로 옮겨진 결과를 얻을 수 있다. 요약하면 다음과 같다.

#### 하노이 탑 이동 순서
>1. 원판 1~원판 N-1을 기둥 st에서 기둥 vac로 옮김.
>2. 원판 N을 기둥 st에서 기둥 ed로 옮김.
>3. 원판 1~원판 N-1을 기둥 vac에서 기둥 ed로 옮김.


### 함수
####  ``process(floor, st, ed)``
> ``floor``층의 하노이 탑을 기둥 ``st``에서 기둥 ``ed``로 옮기는 과정을 출력한다.

- ``argument``
    - ``floor`` : 과정을 계산할 하노이 탑의 층수이다.
    - ``st`` : 출발점 기둥의 번호이다.
    - ``ed`` : 도착점 기둥의 번호이다.

1. floor가 1이라면 원판을 st에서 ed로 옮기면 된다. 그 과정을 출력한다.
2. st와 ed 기둥의 번호를 가지고 빈 기둥 (vac)의 번호를 결정한다. st, ed는 1, 2, 3 중 서로 다른 두 수이기 때문에 st+ed의 값이 두 수의 조합에 따라 달라진다.
3. floor-1층의 탑을 st에서 vac으로 옮기는 과정을 출력한다.
4. 마지막 원판을 st에서 ed로 옮기는 과정을 출력한다.
5. floor-1층의 탑을 vac에서 ed로 옮기는 과정을 출력한다.
